<div dir="rtl">

# JVM و JRE و JDK

## 1️⃣ نظرة عامة على المفهوم

**JVM (الآلة الافتراضية لجافا)**: آلة مجردة تنفذ كود Java المترجم (bytecode). توفر استقلالية عن المنصة من خلال تحويل الـ bytecode إلى كود خاص بالجهاز أثناء وقت التشغيل.

**JRE (بيئة تشغيل جافا)**: تحتوي على JVM بالإضافة إلى المكتبات والملفات الأخرى اللازمة لتشغيل تطبيقات Java. لا تتضمن أدوات التطوير مثل المترجمات.

**JDK (حزمة تطوير جافا)**: بيئة تطوير كاملة تتضمن JRE بالإضافة إلى أدوات التطوير (المترجم، المنقح، javadoc، إلخ) اللازمة لتطوير تطبيقات Java.

**التسلسل الهرمي البسيط**: JDK ⊃ JRE ⊃ JVM

---

## 2️⃣ لماذا يسأل المحاورون عن هذا

- **اختبار المعرفة الأساسية**: فهم هذه المكونات يُظهر أنك تعرف كيف تعمل Java فعلياً
- **التمييز بين المطورين**: كثيرون يستطيعون كتابة الكود لكن لا يفهمون نموذج التنفيذ الأساسي
- **الكشف عن فهم استقلالية المنصة**: جوهر فلسفة Java "اكتب مرة واحدة، شغّل في أي مكان"
- **إظهار الوعي ببيئة التطوير**: فهم الأدوات التي تحتاجها فعلياً

---

## 3️⃣ القواعد والحقائق الأساسية

- JVM **تعتمد على المنصة** (JVM لـ Windows تختلف عن JVM لـ Linux)
- الـ bytecode **مستقل عن المنصة** (ملفات .class تعمل في أي مكان)
- لدى JVM ثلاثة أنظمة فرعية رئيسية:
  - **ClassLoader**: يحمّل ملفات الـ class
  - **مناطق البيانات أثناء التشغيل**: مناطق الذاكرة (heap، stack، method area، إلخ)
  - **محرك التنفيذ**: ينفذ الـ bytecode (يحتوي على مترجم JIT)
- لتشغيل تطبيقات Java: تحتاج JRE (كحد أدنى)
- لتطوير تطبيقات Java: تحتاج JDK
- تقوم JVM بإدارة الذاكرة تلقائياً (garbage collection)
- مترجم JIT (Just-In-Time) يحوّل الـ bytecode إلى كود الآلة الأصلي لتحسين الأداء

---

## 4️⃣ أمثلة برمجية (Java 8)

### المثال 1: تدفق الترجمة والتنفيذ

```java
// HelloWorld.java (الكود المصدري)
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}
```

**الترجمة (تتطلب JDK)**:
```bash
javac HelloWorld.java  # ينتج HelloWorld.class (bytecode)
```

**التنفيذ (يتطلب JRE)**:
```bash
java HelloWorld  # JVM تنفذ الـ bytecode
```

### المثال 2: استقلالية المنصة

```java
// Calculate.java
public class Calculate {
    public static void main(String[] args) {
        int result = 10 + 20;
        System.out.println(result);  // Output: 30
    }
}
```

**النقطة الأساسية**: نفس ملف `Calculate.class` يعمل على:
- JVM لـ Windows
- JVM لـ Linux
- JVM لـ Mac
- أي منصة متوافقة مع JVM

الـ bytecode متطابق؛ فقط تطبيق JVM يختلف حسب المنصة.

---

## 5️⃣ أسئلة المقابلات الشائعة

1. **ما الفرق بين JVM و JRE و JDK؟**
2. **هل JVM مستقلة عن المنصة؟**
3. **هل يمكننا تشغيل برامج Java بدون JDK؟**
4. **ماذا يحدث عند تنفيذ برنامج Java؟**
5. **لماذا تُسمى Java مستقلة عن المنصة؟**
6. **ما هو الـ bytecode في Java؟**

---

## 6️⃣ إجابات نموذجية

**س1: ما الفرق بين JVM و JRE و JDK؟**

"JVM هي الآلة الافتراضية لجافا التي تنفذ فعلياً الـ bytecode الخاص بـ Java. JRE هي بيئة تشغيل Java، التي تتضمن JVM بالإضافة إلى المكتبات القياسية اللازمة لتشغيل التطبيقات. JDK هي حزمة تطوير Java، التي تحتوي على JRE بالإضافة إلى أدوات التطوير مثل المترجم والمنقح. ببساطة، JDK للمطورين لإنشاء التطبيقات، JRE للمستخدمين لتشغيل التطبيقات، وJVM هي المحرك الذي ينفذ الكود."

**س2: هل JVM مستقلة عن المنصة؟**

"لا، JVM تعتمد على المنصة. كل نظام تشغيل له تطبيق JVM خاص به. ومع ذلك، الـ bytecode مستقل عن المنصة. هذا يعني أنك تكتب الكود مرة واحدة، تترجمه إلى bytecode، وهذا الـ bytecode يمكن تشغيله على أي JVM بغض النظر عن نظام التشغيل الأساسي."

**س3: هل يمكننا تشغيل برامج Java بدون JDK؟**

"نعم. لتشغيل برامج Java، تحتاج فقط JRE. JDK مطلوبة فقط للتطوير—ترجمة الكود المصدري، تنقيحه، وإنشاء التوثيق. بمجرد ترجمة البرنامج إلى bytecode، يمكن تنفيذه على أي جهاز مثبت عليه JRE فقط."

**س4: ماذا يحدث عند تنفيذ برنامج Java؟**

"عند تنفيذ برنامج Java، أولاً يقوم ClassLoader بتحميل ملفات .class إلى الذاكرة. ثم يتحقق Bytecode Verifier من الكود للكشف عن أي انتهاكات أمنية. بعد التحقق، ينفذ محرك التنفيذ الـ bytecode—إما بتفسيره أو باستخدام مترجم JIT لتحويله إلى كود آلة أصلي لأداء أفضل. تدير JVM تخصيص الذاكرة وجمع القمامة طوال فترة التنفيذ."

**س5: لماذا تُسمى Java مستقلة عن المنصة؟**

"Java مستقلة عن المنصة بسبب طبقة JVM. عند ترجمة كود Java، يتم تحويله إلى bytecode، وليس كود آلة. هذا الـ bytecode مستقل عن المنصة ويمكن تشغيله على أي نظام لديه JVM متوافقة. تعمل JVM كطبقة تجريد بين الـ bytecode ونظام التشغيل، وتتعامل مع التفاصيل الخاصة بالمنصة."

**س6: ما هو الـ bytecode في Java؟**

"الـ bytecode هو التمثيل الوسيط لكود Java بعد الترجمة. يُخزن في ملفات .class وهو مستقل عن المنصة. تقرأ JVM هذا الـ bytecode وتنفذه. الـ bytecode ليس كود آلة—إنه مصمم ليتم تنفيذه بواسطة JVM، التي تترجمه بعد ذلك إلى تعليمات خاصة بالجهاز أثناء وقت التشغيل."

---

## 7️⃣ الأخطاء الشائعة

1. **الخلط بين JVM و JRE**: القول أن "JVM تتضمن مكتبات" (غير صحيح—هذه JRE)

2. **الادعاء بأن Java مستقلة 100% عن المنصة**: الدوال الأصلية (JNI) وبعض عمليات الملفات يمكن أن تعتمد على المنصة

3. **التفكير بأن الـ bytecode هو كود آلة**: الـ bytecode خاص بـ JVM، وليس خاصاً بالمعالج

4. **عدم ذكر مترجم JIT**: إغفاله عند شرح تحسين الأداء

5. **القول بأن JVM مستقلة عن المنصة**: JVM نفسها خاصة بالمنصة؛ الـ bytecode هو المستقل عن المنصة

6. **نسيان جمع القمامة (garbage collection)**: إنها مسؤولية رئيسية لـ JVM

7. **الخلط بين javac (المترجم في JDK) و java (وقت التشغيل في JRE)**: خلط مراحل الترجمة والتنفيذ

---

## 8️⃣ نصائح من المقابلات الفعلية

**ما يجب التأكيد عليه**:
- البنية الطبقية: JDK تحتوي على JRE التي تحتوي على JVM
- استقلالية المنصة تأتي من الـ bytecode + تجريد JVM
- مترجم JIT للأداء (يُظهر معرفة أعمق)
- إدارة الذاكرة وجمع القمامة

**ما يجب تجنبه**:
- لا تتعمق في التفاصيل الداخلية لـ JVM إلا إذا طُلب منك
- لا تخلط بين الترجمة (JDK) والتنفيذ (JRE)
- لا تدّعِ أن Java "مستقلة تماماً" عن المنصة (اعترف بالدوال الأصلية)

**تحت الضغط**:
- ارسم مخططاً بسيطاً: صندوق JDK يحتوي صندوق JRE يحتوي صندوق JVM
- استخدم تدفق الترجمة/التنفيذ: `.java → javac → .class → java → JVM → كود آلة`
- تذكر: "اكتب مرة واحدة، شغّل في أي مكان" هي النقطة البيعية الرئيسية

**علامات التحذير التي يجب تجنبها**:
- "JVM تترجم كود Java" (لا، javac يفعل ذلك)
- "JRE تُستخدم لتطوير التطبيقات" (لا، هذه JDK)
- "الـ bytecode يعتمد على المنصة" (لا، JVM هي التي تعتمد)

**نقاط إضافية**:
- اذكر آلية تحميل الـ classes
- أشر إلى مترجم JIT
- ناقش مناطق الذاكرة (heap، stack)
- اشرح التحقق من الـ bytecode للأمان

</div>
